sudo yum update -y

sudo rpm -Uvh https://packages.microsoft.com/config/centos/7/packages-microsoft-prod.rpm
sudo yum install aspnetcore-runtime-5.0 -y
sudo yum install dotnet-sdk-5.0 -y

sudo yum install httpd -y
sudo yum install httpd mod_ssl -y

sudo touch /etc/httpd/conf.d/Api.conf
sudo "<VirtualHost *:*>
    RequestHeader set "X-Forwarded-Proto" expr=%{REQUEST_SCHEME}
</VirtualHost>

<VirtualHost *:80>
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:5000/
    ProxyPassReverse / http://127.0.0.1:5000/
    ServerName www.example.com
    ServerAlias *.example.com
    ErrorLog ${APACHE_LOG_DIR}helloapp-error.log
    CustomLog ${APACHE_LOG_DIR}helloapp-access.log common
</VirtualHost>" >> /etc/httpd/conf.d/Api.conf



#Starting
sudo systemctl start httpd

sudo service httpd configtest
sudo systemctl restart httpd
sudo systemctl enable httpd


sudo amazon-linux-extras install -y lamp-mariadb10.2-php7.2 php7.2